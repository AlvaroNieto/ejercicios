<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <script src="jquery-1.11.3.js"></script>
  <link rel="stylesheet" href="EJ3.css">
</head>

<body>
<div id="container">
  <p>Puedo añadir tantos niveles como quiera sin tocar el código de jquery solo añadiendo la lista en el html, ejemplo en 4-2-2-2fin</p>
  <ul id="menu">
     <li><p>1</p>
      <ul>
        <li><p>1-1</p>
           <ul>
              <li><p>1-1-1</p>
                <ul>
                   <li><p>1-1-1-1fin</p></li>
                   <li><p>1-1-1-2fin</p></li>
                </ul></li>
              <li><p>1-1-2</p>
                <ul>
                   <li><p>1-1-2-1fin</p></li>
                   <li><p>1-1-2-2fin</p></li>
                </ul></li>
           </ul>
        </li>
        <li><p>1-2</p>
           <ul>
              <li><p>1-2-1</p>
                <ul>
                   <li><p>1-1-2-1fin</p></li>
                   <li><p>1-1-2-2fin</p></li>
                </ul></li>
              <li><p>1-2-2</p>
                <ul>
                   <li><p>1-1-2-1fin</p></li>
                   <li><p>1-1-2-2fin</p></li>
                </ul></li>
           </ul>
        </li>
      </ul>
     </li>
     <li><p>2</p>
        <ul>
           <li><p>2-1</p>
              <ul>
                 <li><p>2-1-1</p>
                   <ul>
                      <li><p>2-1-1-1fin</p></li>
                      <li><p>2-1-1-2fin</p></li>
                   </ul></li>
                 <li><p>2-1-2</p>
                   <ul>
                      <li><p>2-1-2-1fin</p></li>
                      <li><p>2-1-2-2fin</p></li>
                   </ul></li>
              </ul>
           </li>
           <li><p>2-2</p>
              <ul>
                 <li><p>2-2-1</p>
                   <ul>
                      <li><p>2-2-2-1fin</p></li>
                      <li><p>2-2-2-2fin</p></li>
                   </ul></li>
                 <li><p>2-2-2</p>
                   <ul>
                      <li><p>2-2-2-1fin</p></li>
                      <li><p>2-2-2-2fin</p></li>
                   </ul></li>
              </ul>
           </li>
        </ul>
     </li>
     <li><p>3</p>
        <ul>
           <li><p>3-1</p>
              <ul>
                 <li><p>3-1-1</p>
                   <ul>
                      <li><p>3-1-1-1fin</p></li>
                      <li><p>3-1-1-2fin</p></li>
                   </ul></li>
                 <li><p>3-1-2</p>
                   <ul>
                      <li><p>3-1-2-1fin</p></li>
                      <li><p>3-1-2-2fin</p></li>
                   </ul></li>
              </ul>
           </li>
           <li ><p>3-2</p>
              <ul>
                 <li><p>3-2-1</p>
                   <ul>
                      <li><p>3-2-1-1fin</p></li>
                      <li><p>3-2-1-2fin</p></li>
                   </ul></li>
                 <li><p>3-2-2</p>
                   <ul>
                      <li><p>3-2-2-1fin</p></li>
                      <li><p>3-2-2-2fin</p></li>
                   </ul></li>
              </ul>
           </li>
        </ul>
     </li>
     <li><p>4</p>
        <ul>
           <li><p>4-1</p>
              <ul>
                 <li><p>4-1-1</p>
                   <ul>
                      <li><p>4-1-1-1fin</p></li>
                      <li><p>4-1-1-2fin</p></li>
                   </ul></li>
                 <li><p>4-1-2</p>
                   <ul>
                      <li><p>4-1-2-1fin</p></li>
                      <li><p>4-1-2-2fin</p></li>
                   </ul></li>
              </ul>
           </li>
           <li><p>4-2</p>
              <ul>
                 <li><p>4-2-1</span>
                   <ul>
                      <li><p>4-2-1-1fin</p></li>
                      <li><p>4-2-1-2fin</p></li>
                   </ul></li>
                 <li><p>4-2-2</p>
                   <ul>
                      <li><p>4-2-2-1fin</p></li>
                      <li><p>4-2-2-2fin</p>
                        <ul>
                           <li><p>4-2-2-1fin</p>
                             <ul>
                                <li><p>4-2-2-1fin</p>
                                  <ul>
                                     <li><p>4-2-2-1fin</p>
                                       <ul>
                                          <li><p>4-2-2-1fin</p>
                                            <ul>
                                               <li><p>4-2-2-1fin</p>
                                                 <ul>
                                                    <li><p>4-2-2-1fin</p>
                                                      <ul>
                                                         <li><p>4-2-2-1fin</p>
                                                           <ul>
                                                              <li><p>4-2-2-1fin</p>
                                                                <ul>
                                                                   <li><p>4-2-2-1fin</p></li>
                                                                </ul></li>
                                                           </ul></li>
                                                      </ul></li>
                                                 </ul></li>
                                            </ul></li>
                                       </ul></li>
                                  </ul></li>
                             </ul></li>
                        </ul></li>
                   </ul></li>
              </ul>
           </li>
        </ul>
     </li>
  </ul>

  <script>
  $(document).ready(function() {
    $("ul").hide();
    $("#menu").show();
    $("#menu > li").mouseenter(function() {
      $(this).children("ul").css('display','inline');
      $("#menu > li").mouseleave(function() {
          $(this).children("ul").css('display','none');
          //Si utilizo .hide() y al volver a usar .show() las listas vuelven como display:block y se fastidia todo.
          });
        });
        $(this).find("li").mouseenter(function() {
          $(this).children("ul").css('display','inline');
          $(this).find("li").mouseleave(function() {
              $(this).children("ul").css('display','none');
            });
          });
        });

  </script>
</body>

</html>
